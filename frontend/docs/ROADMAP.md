# 프로젝트 로드맵

말랭이(MaLangEE) 사업 모델 분석 및 개선 실행 계획

---

## 1. 프로젝트 개요

**서비스명**: 말랭이 (MaLangEE)
**핵심 가치**: "현지 느낌 그대로" - AI 기반 실시간 영어 회화 학습 플랫폼
**기술 스택**: Next.js 16 + React 19 + TypeScript, Tailwind CSS v4 + shadcn/ui, FastAPI WebSocket

### 타겟 사용자

- 영어 회화 연습이 필요한 한국어 사용자
- 특정 상황(여행, 쇼핑, 비즈니스 등)에서의 영어 사용에 어려움을 느끼는 사용자
- 원어민과의 실제 대화 전 시뮬레이션이 필요한 사용자

### 가치 제안

| 기능                    | 설명                                                      | 사용자 혜택              |
| ----------------------- | --------------------------------------------------------- | ------------------------ |
| **상황 기반 학습**      | 사용자가 원하는 상황을 음성으로 말하면 AI가 시나리오 재현 | 개인화된 맞춤 연습       |
| **실시간 힌트**         | "MalangEE Tips"로 대화 중 적절한 표현 제안                | 불안감 감소, 즉각적 학습 |
| **자막 옵션**           | 학습자 수준에 맞춰 자막 표시 여부 선택                    | 난이도 조절 가능         |
| **대화 기록 및 피드백** | 대화 저장, 요약, 더 나은 표현 제안                        | 지속적인 성장 추적       |

### 경쟁 우위

1. **자연어 시나리오 입력**: "마트에서 장보는 상황" 같은 한국어 문장으로 즉시 시나리오 생성
2. **단계별 상황 확인**: 불명확한 입력 시 추가 질문으로 정확한 시나리오 구성
3. **유머러스한 UX**: "그게 답니까?" 같은 친근한 피드백으로 사용자 경험 향상

---

## 2. 현재 상태 (2025-01-23)

### 완료된 기능

- ✅ 랜딩 페이지 (/)
- ✅ 로그인/회원가입 페이지 (/auth/login, /auth/signup)
- ✅ 시나리오 선택 페이지 (/scenario-select)
- ✅ 대시보드 페이지 (/dashboard)
- ✅ 인증 시스템 (JWT, GuestGuard, AuthGuard)
- ✅ WebSocket 연동 (시나리오/대화 모드)
- ✅ 음성 녹음/재생 기능 (PCM16, 24kHz)

### 미구현 기능 (Figma Gap)

| 기능                 | Figma 화면          | 상태         | 우선순위 |
| -------------------- | ------------------- | ------------ | -------- |
| 언어인지 불가 팝업   | 17/19.언어인지 불가 | ❌ 미구현    | 중간     |
| 대화종료 재확인 팝업 | 15.대화종료 팝업    | ⚠️ 부분 구현 | 중간     |
| 회원가입 권유 팝업   | 14.회원가입 권유    | ❌ 미구현    | 중간     |
| 실시간 힌트 UI       | 13.실시간 힌트      | ⚠️ 부분 구현 | 중간     |

### 알려진 버그

#### localStorage 키 일관성 문제

`direct-speech/page.tsx`에서만 snake_case(`conversation_goal`, `conversation_partner`)로 저장하고, 다른 페이지에서는 camelCase(`conversationGoal`, `conversationPartner`)를 사용하여 데이터 불일치 발생.

**영향 범위**:

| 파일                              | 키 형식    | 상태 |
| --------------------------------- | ---------- | ---- |
| `direct-speech/page.tsx:152-153`  | snake_case | ❌   |
| `welcome-back/page.tsx:67,70`     | camelCase  | ✅   |
| `topic-suggestion/page.tsx:45-46` | camelCase  | ✅   |
| `ScenarioResult` 인터페이스       | camelCase  | ✅   |
| `e2e/scenario.spec.ts`            | camelCase  | ✅   |

**데이터 손실 시나리오**:

1. Direct Speech에서 시나리오 완성 → `conversation_goal` (snake_case) 저장
2. Welcome Back 페이지에서 `conversationGoal` (camelCase) 읽기 시도
3. 키가 다르므로 `undefined` 반환 → 데이터 손실

**해결 방안** (Phase 1에서 수정 예정):

- [ ] `shared/config/storage-keys.ts` 생성 (모든 localStorage 키 상수화)
- [ ] `direct-speech/page.tsx` snake_case → camelCase 수정

---

## 3. 개선 계획

### Phase 1: UI/UX 개선 (60% 완료)

- [x] Tailwind CSS v4 테마 변수 적용
- [x] 공용 컴포넌트 (DecorativeCircle, GlassmorphicCard, PageBackground)
- [ ] 반응형 디자인 (모바일 퍼스트)
- [ ] 접근성 개선 (WCAG AA)
- [ ] **[버그]** localStorage 키 일관성 수정 (`direct-speech/page.tsx` snake_case → camelCase)

### Phase 2: 음성/WebSocket ✅ 완료

- [x] 시나리오 WebSocket
- [x] 대화 WebSocket
- [x] 오디오 레코더

### Phase 3: 언어인지 불가 팝업 (Figma 17/19)

- [ ] `features/chat/ui/LanguageNotRecognizedDialog.tsx` 생성
- [ ] WebSocket `error` 이벤트에서 언어 인식 실패 시 트리거
- [ ] 재시도 / 텍스트 입력 전환 옵션 제공

### Phase 4: 대화종료 재확인 팝업 (Figma 15)

- [ ] `features/chat/ui/EndConversationDialog.tsx` 개선
- [ ] 종료 버튼 클릭 시 확인 다이얼로그 표시
- [ ] "계속하기" / "종료하기" 옵션

### Phase 5: 회원가입 권유 팝업 (Figma 14)

- [ ] `features/auth/ui/SignupPromptDialog.tsx` 생성
- [ ] 게스트 사용자 대화 완료 시 트리거
- [ ] 대화 기록 저장 혜택 안내 + 가입 유도

### Phase 6: 실시간 힌트 UI (Figma 13)

- [ ] `features/chat/ui/RealtimeHint.tsx` 개선
- [ ] WebSocket `hint` 이벤트 연동
- [ ] 말풍선 스타일 + 애니메이션 적용

### Phase 7: 테스트/품질 (10% 완료)

- [x] E2E 테스트 기본 구조
- [ ] 단위 테스트 보강
- [ ] 스토리북 문서화

---

## 4. 사용자 플로우

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────────┐
│    랜딩 페이지   │────▶│  로그인/회원가입  │────▶│  (회원) 시작 페이지  │
│    "시작하기"   │     │                 │     │  이전 대화 이어하기  │
└────────┬────────┘     └─────────────────┘     └──────────┬──────────┘
         │                                                  │
         ▼                                                  ▼
┌────────────────────┐                          ┌─────────────────────┐
│ (비회원) 시작 페이지│                          │   선택: 이어하기    │
│   상황 음성 입력   │◀─────────────────────────│   또는 새로 시작    │
└─────────┬──────────┘                          └─────────────────────┘
          │
          ▼
┌────────────────────┐     ┌────────────────────┐
│    상황 확인       │────▶│   목소리/자막 선택  │
│  (AI가 듣는 중...) │     │                    │
└─────────┬──────────┘     └─────────┬──────────┘
          │                          │
          ▼                          ▼
┌──────────────────────────────────────────────┐
│              실시간 대화 진행                  │
│  ┌───────────────┐   ┌───────────────────┐  │
│  │  AI 말하는 중  │◀─▶│  사용자 말하는 중  │  │
│  │  (자막 옵션)  │   │   (실시간 힌트)   │  │
│  └───────────────┘   └───────────────────┘  │
└────────────────────────┬─────────────────────┘
                         │
                         ▼
               ┌──────────────────┐
               │   대화 종료 완료  │
               │   (통계 + 피드백) │
               └──────────────────┘
```

---

## 5. KPI 및 지표

### 사용자 참여 지표

| 지표           | 설명                         | 목표   |
| -------------- | ---------------------------- | ------ |
| 세션 지속 시간 | 평균 대화 길이               | > 10분 |
| 발화 비율      | 사용자 발화 시간 / 전체 시간 | > 40%  |
| 재방문율       | 7일 내 재방문 사용자         | > 60%  |
| 완료율         | 완료된 대화 / 시작된 대화    | > 80%  |

### 비즈니스 지표

| 지표               | 설명              | 목표  |
| ------------------ | ----------------- | ----- |
| 비회원 → 회원 전환 | 체험 후 가입 비율 | > 30% |
| 무료 → 유료 전환   | 업그레이드 비율   | > 10% |
| 이탈률             | 월간 사용자 손실  | < 5%  |

---

## 6. 버전 관리

| 버전     | 마일스톤                       | 상태    |
| -------- | ------------------------------ | ------- |
| `v0.1.0` | Phase 1 (UI/UX)                | 진행중  |
| `v0.2.0` | Phase 2 (WebSocket)            | ✅ 완료 |
| `v0.3.0` | Phase 3 (언어인지 불가 팝업)   | 예정    |
| `v0.4.0` | Phase 4 (대화종료 재확인 팝업) | 예정    |
| `v0.5.0` | Phase 5 (회원가입 권유 팝업)   | 예정    |
| `v0.6.0` | Phase 6 (실시간 힌트 UI)       | 예정    |
| `v1.0.0` | Phase 7 (테스트/MVP)           | 예정    |

---

**최초 작성일**: 2025-01-10
**마지막 업데이트**: 2025-01-23
